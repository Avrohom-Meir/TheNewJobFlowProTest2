{"version":3,"sources":["../src/schema.ts"],"sourcesContent":["import { pgTable, serial, text, timestamp, integer, jsonb, boolean, decimal, date, time } from 'drizzle-orm/pg-core'\n\n// Lookups / Configuration\nexport const typeT = pgTable('TypeT', {\n  id: serial('ID').primaryKey(),\n  name: text('Name').notNull(),\n  description: text('Description'),\n})\n\nexport const helperT = pgTable('HelperT', {\n  id: serial('ID').primaryKey(),\n  typeId: integer('TypeID').references(() => typeT.id).notNull(),\n  name: text('Name').notNull(),\n  extraFields: jsonb('ExtraFields'), // for storing name + role + email etc.\n})\n\nexport const settingT = pgTable('SettingT', {\n  id: serial('ID').primaryKey(),\n  key: text('Key').notNull().unique(),\n  value: text('Value'),\n  description: text('Description'),\n})\n\nexport const settingHelperT = pgTable('SettingHelperT', {\n  id: serial('ID').primaryKey(),\n  settingId: integer('SettingID').references(() => settingT.id).notNull(),\n  name: text('Name').notNull(),\n  value: text('Value'),\n})\n\nexport const translationT = pgTable('TranslationT', {\n  id: serial('ID').primaryKey(),\n  key: text('Key').notNull(),\n  value: text('Value').notNull(),\n  language: text('Language').default('en'),\n})\n\nexport const devTranslationT = pgTable('DevTranslationT', {\n  id: serial('ID').primaryKey(),\n  key: text('Key').notNull(),\n  value: text('Value').notNull(),\n})\n\nexport const trustedDomainT = pgTable('TrustedDomainT', {\n  id: serial('ID').primaryKey(),\n  domain: text('Domain').notNull(),\n})\n\nexport const updateT = pgTable('UpdateT', {\n  id: serial('ID').primaryKey(),\n  version: text('Version').notNull(),\n  description: text('Description'),\n  appliedAt: timestamp('AppliedAt').defaultNow().notNull(),\n})\n\n// Core Business Tables\nexport const customerT = pgTable('CustomerT', {\n  id: serial('ID').primaryKey(),\n  name: text('Name').notNull(),\n  email: text('Email'),\n  phone: text('Phone'),\n  address: text('Address'),\n  createdAt: timestamp('CreatedAt').defaultNow().notNull(),\n})\n\nexport const jobT = pgTable('JobT', {\n  id: serial('ID').primaryKey(),\n  customerId: integer('CustomerID').references(() => customerT.id),\n  statusId: integer('StatusID').references(() => helperT.id),\n  typeId: integer('TypeID').references(() => helperT.id),\n  description: text('Description'),\n  createdAt: timestamp('CreatedAt').defaultNow().notNull(),\n  updatedAt: timestamp('UpdatedAt').defaultNow().notNull(),\n})\n\nexport const activeJobT = pgTable('ActiveJobT', {\n  id: serial('ID').primaryKey(),\n  jobId: integer('JobID').references(() => jobT.id).notNull(),\n  // other fields as needed\n})\n\nexport const jobDetailT = pgTable('JobDetailT', {\n  id: serial('ID').primaryKey(),\n  jobId: integer('JobID').references(() => jobT.id).notNull(),\n  description: text('Description'),\n  quantity: decimal('Quantity'),\n  price: decimal('Price'),\n})\n\nexport const jobLableT = pgTable('JobLableT', {\n  id: serial('ID').primaryKey(),\n  jobId: integer('JobID').references(() => jobT.id).notNull(),\n  label: text('Label').notNull(),\n})\n\nexport const statusHistoryT = pgTable('StatusHistoryT', {\n  id: serial('ID').primaryKey(),\n  jobId: integer('JobID').references(() => jobT.id).notNull(),\n  oldStatusId: integer('OldStatusID').references(() => helperT.id),\n  newStatusId: integer('NewStatusID').references(() => helperT.id).notNull(),\n  changedAt: timestamp('ChangedAt').defaultNow().notNull(),\n  changedBy: text('ChangedBy'),\n})\n\nexport const appointmentT = pgTable('AppointmentT', {\n  id: serial('ID').primaryKey(),\n  jobId: integer('JobID').references(() => jobT.id),\n  typeId: integer('TypeID').references(() => helperT.id),\n  date: date('Date').notNull(),\n  time: time('Time'),\n  notes: text('Notes'),\n  confirmed: boolean('Confirmed').default(false),\n})\n\nexport const appointmentColourT = pgTable('AppointmentColourT', {\n  id: serial('ID').primaryKey(),\n  typeId: integer('TypeID').references(() => helperT.id).notNull(),\n  colour: text('Colour').notNull(),\n})\n\nexport const quoteT = pgTable('QuoteT', {\n  id: serial('ID').primaryKey(),\n  jobId: integer('JobID').references(() => jobT.id).notNull(),\n  total: decimal('Total'),\n  status: text('Status').default('Draft'),\n  createdAt: timestamp('CreatedAt').defaultNow().notNull(),\n})\n\nexport const paymentT = pgTable('PaymentT', {\n  id: serial('ID').primaryKey(),\n  jobId: integer('JobID').references(() => jobT.id),\n  amount: decimal('Amount').notNull(),\n  methodId: integer('MethodID').references(() => helperT.id),\n  date: date('Date').notNull(),\n})\n\nexport const expenseT = pgTable('ExpenseT', {\n  id: serial('ID').primaryKey(),\n  jobId: integer('JobID').references(() => jobT.id),\n  description: text('Description'),\n  amount: decimal('Amount').notNull(),\n  receipt: text('Receipt'), // url or path\n  date: date('Date').notNull(),\n})\n\nexport const maintenanceT = pgTable('MaintenanceT', {\n  id: serial('ID').primaryKey(),\n  jobId: integer('JobID').references(() => jobT.id),\n  issue: text('Issue').notNull(),\n  resolved: boolean('Resolved').default(false),\n  resolvedAt: timestamp('ResolvedAt'),\n})\n\nexport const transactionImportT = pgTable('TransactionImportT', {\n  id: serial('ID').primaryKey(),\n  date: date('Date').notNull(),\n  description: text('Description'),\n  amount: decimal('Amount').notNull(),\n  matchedJobId: integer('MatchedJobID').references(() => jobT.id),\n  status: text('Status').default('Unmatched'), // New/Match Found/Unmatched/Completed\n})\n\nexport const letterT = pgTable('LetterT', {\n  id: serial('ID').primaryKey(),\n  typeId: integer('TypeID').references(() => typeT.id),\n  content: text('Content'),\n  placeholders: jsonb('Placeholders'),\n})\n\nexport const onSiteNoteT = pgTable('OnSiteNoteT', {\n  id: serial('ID').primaryKey(),\n  jobId: integer('JobID').references(() => jobT.id).notNull(),\n  note: text('Note'),\n  media: jsonb('Media'), // array of urls or paths\n  createdAt: timestamp('CreatedAt').defaultNow().notNull(),\n  createdBy: text('CreatedBy'),\n})"],"mappings":"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","names":[]}